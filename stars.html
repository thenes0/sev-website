<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gelişmiş 3D Güneş Sistemi</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        canvas {
            display: block;
        }
        #infoBox {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px;
            border-radius: 10px;
            display: none;
            width: 300px;
        }
        #infoBox h2 {
            margin: 0;
            font-size: 18px;
        }
        #infoBox p {
            font-size: 14px;
            margin: 10px 0 0;
        }
    </style>
</head>
<body>
    <div id="infoBox">
        <h2 id="objectName"></h2>
        <p id="objectInfo"></p>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/TextureLoader.js"></script>
    <script>
        // === Temel Three.js Ayarları ===
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 5000);
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // === Kamera Kontrolleri ===
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        camera.position.set(0, 100, 500);
        controls.update();

        // === Işıklar ===
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.2); // Ortam ışığı
        scene.add(ambientLight);

        const pointLight = new THREE.PointLight(0xffffff, 1); // Güneş ışığı
        pointLight.position.set(0, 0, 0);
        scene.add(pointLight);

        // === Güneş ===
        const sunGeometry = new THREE.SphereGeometry(50, 32, 32);
        const sunMaterial = new THREE.MeshBasicMaterial({ color: 0xffcc00 });
        const sun = new THREE.Mesh(sunGeometry, sunMaterial);
        scene.add(sun);

        // === Gezegenler ve Uydular ===
        const textureLoader = new THREE.TextureLoader();

        const celestialBodies = [
            {
                name: "Dünya",
                radius: 10,
                distance: 200,
                color: 0x3399ff,
                speed: 0.01,
                texture: "https://planet-textures.s3.amazonaws.com/earth.jpg",
                info: "Dünya, yaşam barındıran tek gezegendir ve suya sahiptir.",
                atmosphereTexture: "https://planet-textures.s3.amazonaws.com/earth-clouds.png",
                moons: [
                    {
                        name: "Ay",
                        radius: 3,
                        distance: 20,
                        color: 0xaaaaaa,
                        speed: 0.05,
                        texture: "https://planet-textures.s3.amazonaws.com/moon.jpg",
                        info: "Ay, Dünya'nın tek doğal uydusudur."
                    }
                ]
            }
        ];

        const celestialMeshes = [];
        const orbits = [];

        celestialBodies.forEach(body => {
            // Gezegen
            const planetGeometry = new THREE.SphereGeometry(body.radius, 32, 32);
            const planetTexture = textureLoader.load(body.texture);
            const planetMaterial = new THREE.MeshStandardMaterial({ map: planetTexture });
            const planetMesh = new THREE.Mesh(planetGeometry, planetMaterial);
            planetMesh.position.x = body.distance;
            scene.add(planetMesh);

            // Atmosfer (Sadece Dünya için)
            if (body.atmosphereTexture) {
                const atmosphereGeometry = new THREE.SphereGeometry(body.radius + 0.5, 32, 32);
                const atmosphereTexture = textureLoader.load(body.atmosphereTexture);
                const atmosphereMaterial = new THREE.MeshStandardMaterial({
                    map: atmosphereTexture,
                    transparent: true,
                    opacity: 0.5
                });
                const atmosphereMesh = new THREE.Mesh(atmosphereGeometry, atmosphereMaterial);
                atmosphereMesh.position.copy(planetMesh.position);
                scene.add(atmosphereMesh);
            }

            celestialMeshes.push({
                mesh: planetMesh,
                speed: body.speed,
                distance: body.distance,
                angle: 0,
                info: body.info,
                name: body.name
            });

            // Uydular
            body.moons.forEach(moon => {
                const moonGeometry = new THREE.SphereGeometry(moon.radius, 32, 32);
                const moonTexture = textureLoader.load(moon.texture);
                const moonMaterial = new THREE.MeshStandardMaterial({ map: moonTexture });
                const moonMesh = new THREE.Mesh(moonGeometry, moonMaterial);
                moonMesh.position.set(body.distance + moon.distance, 0, 0);
                scene.add(moonMesh);
                celestialMeshes.push({
                    mesh: moonMesh,
                    speed: moon.speed,
                    distance: moon.distance,
                    angle: 0,
                    info: moon.info,
                    name: moon.name
                });
            });
        });

        // === Gezegen ve Uydu Bilgisi Gösterme ===
        const infoBox = document.getElementById("infoBox");
        const objectName = document.getElementById("objectName");
        const objectInfo = document.getElementById("objectInfo");

        window.addEventListener("click", (event) => {
            const mouse = new THREE.Vector2();
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

            const raycaster = new THREE.Raycaster();
            raycaster.setFromCamera(mouse, camera);

            const intersects = raycaster.intersectObjects(celestialMeshes.map(c => c.mesh));
            if (intersects.length > 0) {
                const celestial = celestialMeshes.find(c => c.mesh === intersects[0].object);
                objectName.textContent = celestial.name;
                objectInfo.textContent = celestial.info;
                infoBox.style.display = "block";
            } else {
                infoBox.style.display = "none";
            }
        });

        // === Animasyon ===
        function animate() {
            requestAnimationFrame(animate);

            celestialMeshes.forEach(celestial => {
                celestial.angle += celestial.speed;
                celestial.mesh.position.x = celestial.distance * Math.cos(celestial.angle);
                celestial.mesh.position.z = celestial.distance * Math.sin(celestial.angle);
            });

            controls.update();
            renderer.render(scene, camera);
        }

        animate();

        // === Pencere Boyutlandırma ===
        window.addEventListener("resize", () => {
            renderer.setSize(window.innerWidth, window.innerHeight);
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
        });
    </script>
</body>
</html>
