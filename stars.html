<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yıldız Haritası</title>
    <style>
        body {
            margin: 0;
            background: black;
            color: white;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }

        .star-map {
            position: relative;
            width: 100%;
            height: 100vh;
            background: radial-gradient(circle, rgba(0,0,0,1) 70%, rgba(0,0,0,0.8) 100%);
        }

        .star {
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
        }

        .important-star {
            width: 8px;
            height: 8px;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        }

        .label {
            position: absolute;
            color: white;
            font-size: 0.8rem;
            transform: translate(-50%, -150%);
        }

        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 1.5rem;
        }
    </style>
</head>
<body>
    <div id="star-map" class="star-map">
        <div id="loading" class="loading">Yıldız Haritası Yükleniyor...</div>
    </div>

    <script>
        // AstronomyAPI'den veri çekmek için gerekli bilgiler
        const API_URL = "https://api.astronomyapi.com/api/v2/studio/star-chart";
        const API_KEY = "YOUR_API_KEY"; // Buraya kendi API anahtarınızı ekleyin
        const API_SECRET = "YOUR_API_SECRET"; // Buraya kendi API secret'ınızı ekleyin

        // Rastgele bir yer ve tarih
        const latitude = 41.0082; // İstanbul'un enlemi
        const longitude = 28.9784; // İstanbul'un boylamı
        const date = new Date().toISOString().split("T")[0]; // Bugünün tarihi

        // API'den yıldız haritası verilerini çekme
        async function fetchStarMap() {
            const response = await fetch(API_URL, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": `Basic ${btoa(API_KEY + ":" + API_SECRET)}`,
                },
                body: JSON.stringify({
                    observer: {
                        latitude: latitude,
                        longitude: longitude,
                        date: date,
                    },
                    view: {
                        type: "constellation", // Takımyıldızları içeren bir görünüm
                        parameters: {
                            constellations: true, // Takımyıldızları göster
                            stars: true, // Yıldızları göster
                            planets: true, // Gezegenleri göster
                        },
                    },
                }),
            });

            if (!response.ok) {
                console.error("API'den veri alınamadı.");
                return null;
            }

            const data = await response.json();
            return data;
        }

        // Yıldız haritasını görselleştirme
        async function renderStarMap() {
            const starMapElement = document.getElementById("star-map");
            const loadingElement = document.getElementById("loading");

            // API'den veri çek
            const data = await fetchStarMap();
            if (!data) {
                loadingElement.innerText = "Yıldız Haritası Yüklenemedi.";
                return;
            }

            // Yükleniyor mesajını kaldır
            loadingElement.style.display = "none";

            // Yıldızları ve takımyıldızları ekle
            const stars = data.data.stars;
            stars.forEach((star) => {
                const starElement = document.createElement("div");
                starElement.classList.add("star");
                starElement.style.top = `${star.position.top}%`;
                starElement.style.left = `${star.position.left}%`;

                // Önemli yıldızları vurgula
                if (star.magnitude < 2) {
                    starElement.classList.add("important-star");
                }

                starMapElement.appendChild(starElement);
            });

            // Takımyıldızları etiketle
            const constellations = data.data.constellations;
            constellations.forEach((constellation) => {
                const labelElement = document.createElement("div");
                labelElement.classList.add("label");
                labelElement.style.top = `${constellation.position.top}%`;
                labelElement.style.left = `${constellation.position.left}%`;
                labelElement.innerText = constellation.name;

                starMapElement.appendChild(labelElement);
            });
        }

        // Haritayı başlat
        renderStarMap();
    </script>
</body>
</html>
